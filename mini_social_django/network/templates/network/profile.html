{% extends 'base.html' %}
{% load static %}

{% block title %}@{{ profile_user.username }} · Profile{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-8">
    <div class="card mb-3">
      <div class="card-body d-flex align-items-center">

        {% if profile_user.profile.avatar %}
            <img class="avatar me-3" src="{{ profile_user.profile.avatar.url }}" alt="avatar">
        {% else %}
            <img class="avatar me-3" src="{% static 'network/img/default-avatar.png' %}" alt="avatar">
        {% endif %}

        <div class="flex-grow-1">
          <h4 class="mb-0">@{{ profile_user.username }}</h4>
          <p class="text-muted mb-0">{{ profile_user.profile.bio }}</p>
          <div class="small text-muted">Followers {{ followers }} · Following {{ following }}</div>
        </div>
        {% if user.is_authenticated and user.username != profile_user.username %}
          <button class="btn btn-primary follow-btn" data-url="{% url 'follow_toggle' profile_user.username %}">
            {% if is_following %}Unfollow{% else %}Follow{% endif %}
          </button>
        {% elif user.is_authenticated and user.username == profile_user.username %}
          <a class="btn btn-outline-secondary" href="{% url 'profile_edit' %}">Edit profile</a>
        {% endif %}
      </div>
    </div>

    {% for post in posts %}
      {% include 'network/partials/post_card.html' with post=post %}
    {% empty %}
      <p class="text-muted">No posts yet.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
